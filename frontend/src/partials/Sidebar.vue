<template>
  <div class="min-w-fit">
    <!-- Sidebar backdrop (mobile only) -->
    <div class="fixed inset-0 bg-gray-900/30 z-40 lg:hidden lg:z-auto transition-opacity duration-200"
      :class="sidebarOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'" aria-hidden="true"></div>

    <!-- Sidebar -->
    <div id="sidebar" ref="sidebar"
      class="flex lg:flex! flex-col absolute z-40 left-0 top-0 lg:static lg:left-auto lg:top-auto lg:translate-x-0 h-[100dvh] overflow-y-scroll lg:overflow-y-auto no-scrollbar w-64 lg:w-20 lg:sidebar-expanded:!w-64 2xl:w-64! shrink-0 bg-white dark:bg-gray-800 p-4 transition-all duration-200 ease-in-out"
      :class="[variant === 'v2' ? 'border-r border-gray-200 dark:border-gray-700/60' : 'rounded-r-2xl shadow-xs', sidebarOpen ? 'translate-x-0' : '-translate-x-64']">

      <!-- Sidebar header -->
      <div class="flex justify-between mb-10 pr-3 sm:px-2">
        <!-- Close button -->
        <button ref="trigger" class="lg:hidden text-gray-500 hover:text-gray-400" @click.stop="$emit('close-sidebar')"
          aria-controls="sidebar" :aria-expanded="sidebarOpen">
          <span class="sr-only">Close sidebar</span>
          <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M10.7 18.7l1.4-1.4L7.8 13H20v-2H7.8l4.3-4.3-1.4-1.4L4 12z" />
          </svg>
        </button>
        <!-- Logo -->
        <router-link class="block" to="/vehicle-management">
          <svg class="fill-slate-700 dark:fill-gray-400" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="2em" height="2em"
            viewBox="0 0 122.879 122.879" enable-background="new 0 0 122.879 122.879" xml:space="preserve">
            <path class="st0"
              d="M87.86,19.65v28.62h-6.69v-4.42H41.71v4.42l-6.69,0V19.65h-2.31v-4.4h5.63l3.14-9.76 C42.41,2.61,43.95,0,46.97,0h30.1c3.02,0,4.76,2.56,5.49,5.49l2.43,9.76h5.17v4.4H87.86L87.86,19.65L87.86,19.65z M66.41,97.31 h21.91c1.76-1.75,3.69-3.57,5.65-5.42c4.11-3.89,8.4-7.95,12.81-13.03c5.04-5.81,5.58-7.82,7.11-13.51 c0.29-1.07,0.61-2.27,1.03-3.76l2.62-9.21l0.03-0.1c1.4-4.1,1.51-6.81,0.93-8.37c-0.18-0.48-0.41-0.8-0.68-0.97 c-0.21-0.14-0.49-0.19-0.78-0.16c-0.68,0.07-1.45,0.5-2.15,1.27l-7.78,18.53c-0.07,0.17-0.17,0.33-0.28,0.47 c-0.46,0.83-1.08,1.64-1.88,2.41l-13.8,15.39c-0.75,0.84-2.04,0.91-2.87,0.16c-0.84-0.75-0.91-2.04-0.16-2.87l13.81-15.39 c0.06-0.07,0.12-0.14,0.19-0.2c1.43-1.36,1.88-2.83,1.63-3.9c-0.08-0.33-0.22-0.61-0.42-0.8c-0.19-0.18-0.44-0.29-0.75-0.32v0 c-1.23-0.13-3.04,0.78-5.25,3.39l0,0c-0.06,0.07-0.13,0.14-0.2,0.21l-5.35,4.72l-0.03,0.03c-5.79,5.48-8.28,6.78-12.82,9.15 c-0.95,0.5-1.99,1.04-3.28,1.74c-0.51,0.28-1.01,0.62-1.5,0.99c-0.52,0.4-1.02,0.81-1.49,1.21c-2.4,2.02-3.66,3.66-4.38,5.47 c-0.75,1.88-1.02,4.17-1.39,7.31c-0.15,1.27-0.26,2.52-0.35,3.77C66.47,96.12,66.44,96.72,66.41,97.31L66.41,97.31L66.41,97.31z M56.47,97.31H34.55c-1.76-1.75-3.69-3.57-5.65-5.42c-4.11-3.89-8.4-7.95-12.81-13.03c-5.04-5.81-5.58-7.82-7.11-13.51 c-0.29-1.07-0.61-2.27-1.03-3.76l-2.62-9.21l-0.03-0.1c-1.4-4.1-1.51-6.81-0.93-8.37c0.18-0.48,0.41-0.8,0.68-0.97 c0.21-0.14,0.49-0.19,0.78-0.16c0.68,0.07,1.45,0.5,2.15,1.27l7.78,18.53c0.07,0.17,0.17,0.33,0.28,0.47 c0.46,0.83,1.08,1.64,1.88,2.41l13.8,15.39c0.75,0.84,2.04,0.91,2.87,0.16c0.84-0.75,0.91-2.04,0.16-2.87L20.96,62.73 c-0.06-0.07-0.12-0.14-0.19-0.2c-1.43-1.36-1.88-2.83-1.63-3.9c0.08-0.33,0.22-0.61,0.42-0.8c0.19-0.18,0.44-0.29,0.75-0.32v0 c1.23-0.13,3.05,0.78,5.25,3.39c0,0,0.19,0.19,0.21,0.21l5.35,4.72l0.03,0.03c5.79,5.48,8.28,6.78,12.82,9.15 c0.95,0.5,1.99,1.04,3.28,1.74c0.51,0.28,1.01,0.62,1.5,0.99c0.52,0.4,1.02,0.81,1.49,1.21c2.4,2.02,3.66,3.66,4.38,5.47 c0.75,1.88,1.02,4.17,1.39,7.31c0.15,1.27,0.26,2.52,0.35,3.77C56.41,96.12,56.44,96.72,56.47,97.31L56.47,97.31L56.47,97.31z M29.45,98.01c-0.31,0.36-0.5,0.83-0.5,1.34v12.14c0,1.13,0.92,2.04,2.04,2.04h27.58c1.13,0,2.04-0.92,2.04-2.04V99.24 c0-1.3-0.08-2.7-0.17-4c-0.09-1.33-0.21-2.65-0.36-3.96c-0.4-3.43-0.7-5.94-1.66-8.35c-0.99-2.47-2.58-4.6-5.53-7.09 c-0.54-0.46-1.09-0.92-1.67-1.35c-0.61-0.46-1.27-0.9-2.01-1.31c-1.2-0.65-2.32-1.24-3.34-1.78c-4.2-2.2-6.5-3.4-11.91-8.52 c-0.04-0.04-0.09-0.08-0.13-0.11l-5.22-4.61c-3.19-3.73-6.31-4.97-8.7-4.71l-0.01,0v0c-1.17,0.12-2.17,0.58-2.97,1.28l-5.27-12.56 l-0.01,0c-0.08-0.18-0.18-0.35-0.31-0.51c-1.46-1.75-3.31-2.77-5.08-2.95c-1.21-0.12-2.38,0.14-3.4,0.8 c-0.97,0.63-1.77,1.61-2.27,2.96c-0.88,2.35-0.86,6,0.86,11.05l2.6,9.15c0.38,1.32,0.71,2.59,1.02,3.71 c1.7,6.35,2.3,8.6,7.97,15.12c4.49,5.17,8.88,9.33,13.1,13.31C27.23,95.89,28.33,96.93,29.45,98.01L29.45,98.01L29.45,98.01z M33.35,101.39c0.27,0.06,0.55,0.06,0.83,0h22.34v8.06H33.03v-8.06H33.35L33.35,101.39z M93.43,98.01c0.31,0.36,0.5,0.83,0.5,1.34 v12.14c0,1.13-0.91,2.04-2.04,2.04H64.32c-1.13,0-2.04-0.92-2.04-2.04V99.24c0-0.07,0-0.15,0.01-0.22 c0.03-1.31,0.08-2.58,0.16-3.78c0.09-1.33,0.21-2.65,0.36-3.96c0.4-3.43,0.7-5.94,1.66-8.35c0.99-2.47,2.58-4.6,5.53-7.09 c0.54-0.46,1.09-0.92,1.67-1.35c0.61-0.46,1.27-0.9,2.01-1.31c1.2-0.65,2.32-1.24,3.34-1.78c4.2-2.2,6.5-3.4,11.91-8.52 c0.04-0.04,0.09-0.08,0.13-0.11l5.22-4.61c3.19-3.73,6.31-4.97,8.7-4.71l0.01,0v0c1.17,0.12,2.17,0.58,2.97,1.28l5.27-12.56l0.01,0 c0.08-0.18,0.18-0.35,0.31-0.51c1.46-1.75,3.31-2.77,5.08-2.95c1.21-0.12,2.38,0.14,3.4,0.8c0.97,0.63,1.77,1.61,2.27,2.96 c0.88,2.35,0.86,6-0.86,11.05l-2.6,9.15c-0.38,1.32-0.71,2.59-1.02,3.71c-1.7,6.35-2.3,8.6-7.97,15.12 c-4.49,5.17-8.88,9.33-13.1,13.31C95.65,95.89,94.55,96.93,93.43,98.01L93.43,98.01L93.43,98.01z M89.53,101.39 c-0.27,0.06-0.55,0.06-0.83,0H66.36v8.06h23.49v-8.06H89.53L89.53,101.39z M51.42,35.02h19.76v4.66l-19.76,0V35.02L51.42,35.02 L51.42,35.02z M37.27,24.16c5.04,0.16,8.12,2.27,8.91,6.66h-8.91V24.16L37.27,24.16z M84.98,24.16c-5.03,0.16-8.11,2.27-8.91,6.66 h8.91V24.16L84.98,24.16z M40.75,15.25h41.38l-1.77-8.18c-0.49-2.24-1.88-4.18-4.18-4.18H47.56c-2.3,0-3.48,1.99-4.18,4.18 L40.75,15.25L40.75,15.25L40.75,15.25z" />
          </svg>
        </router-link>
      </div>


      <div class="space-y-8">
        <!-- Main group -->
        <div>
          <h3 class="text-xs uppercase text-gray-400 dark:text-gray-500 font-semibold pl-3">
            <span class="hidden lg:block lg:sidebar-expanded:hidden 2xl:hidden text-center w-6"
              aria-hidden="true">•••</span>
            <span class="lg:hidden lg:sidebar-expanded:block 2xl:block">Main</span>
          </h3>
          <ul class="mt-3">

            <!-- Vehicles -->
            <router-link to="/vehicle-management" custom v-slot="{ href, navigate, isExactActive }">
              <li class="pl-4 pr-3 py-2 rounded-lg mb-0.5 last:mb-0 bg-linear-to-r"
                :class="isExactActive && 'from-slate-700/[0.12] dark:from-violet-500/[0.24] to-slate-500/[0.04]'">
                <a class="block text-gray-800 dark:text-gray-100 truncate transition"
                  :class="isExactActive ? '' : 'hover:text-gray-900 dark:hover:text-white'" :href="href"
                  @click="navigate">
                  <div class="flex items-center">
                    <svg class="dark:fill-gray-100" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1.2em" height="1.2em"
                      viewBox="0 0 122.879 122.879" enable-background="new 0 0 122.879 122.879" xml:space="preserve">
                      <g>
                        <path
                          d="M60.99,0c8.26,0,16.14,1.66,23.32,4.65c7.46,3.12,14.18,7.68,19.8,13.35c5.62,5.67,10.15,12.43,13.24,19.95 c2.98,7.24,4.62,15.17,4.62,23.49c0,8.32-1.64,16.25-4.62,23.49c-3.09,7.52-7.62,14.28-13.24,19.95 c-5.62,5.67-12.34,10.23-19.8,13.35c-7.19,3-15.06,4.65-23.32,4.65c-8.26,0-16.14-1.66-23.32-4.65 c-7.46-3.12-14.18-7.68-19.8-13.35C12.24,99.21,7.71,92.44,4.62,84.93C1.64,77.69,0,69.76,0,61.44c0-8.32,1.64-16.25,4.62-23.49 C7.71,30.43,12.24,23.67,17.86,18c5.62-5.67,12.34-10.23,19.8-13.35C44.85,1.66,52.73,0,60.99,0L60.99,0z M36.71,9.36 c-1.6,0.76-3.16,1.59-4.68,2.49c-1.48,0.88-2.92,1.83-4.31,2.83l4.24,1.73c0.5,0.2,0.87,0.59,1.06,1.05 c0.19,0.46,0.21,0.99,0.01,1.49c-0.2,0.5-0.59,0.87-1.05,1.06c-0.46,0.19-0.99,0.21-1.49,0.01l-6.3-2.57 c-0.61,0.52-1.21,1.05-1.79,1.59c-0.6,0.56-1.19,1.13-1.78,1.72c-0.68,0.68-1.33,1.38-1.97,2.09c-0.59,0.66-1.17,1.33-1.73,2.02 l4.31,0.55c0.53,0.07,0.99,0.35,1.3,0.74c0.31,0.39,0.46,0.91,0.39,1.44c-0.07,0.53-0.35,0.99-0.74,1.3 c-0.39,0.31-0.91,0.46-1.44,0.39l-6.53-0.83c-1,1.43-1.93,2.92-2.8,4.44c-0.84,1.47-1.61,2.99-2.32,4.54l4.1-0.56 c0.53-0.07,1.05,0.08,1.44,0.38c0.4,0.3,0.68,0.76,0.75,1.29l0,0c0.07,0.53-0.08,1.04-0.38,1.44c-0.3,0.4-0.76,0.68-1.29,0.75 L7.4,41.61C6.8,43.24,6.28,44.9,5.83,46.6c-0.43,1.63-0.79,3.28-1.08,4.96l3.66-1.53c0.5-0.21,1.03-0.2,1.5-0.01 c0.46,0.19,0.86,0.56,1.06,1.05c0.21,0.5,0.2,1.03,0.01,1.5c-0.19,0.46-0.56,0.86-1.05,1.06l-5.76,2.42 c-0.08,0.88-0.14,1.76-0.18,2.65c-0.04,0.9-0.06,1.82-0.06,2.74c0,0.87,0.02,1.73,0.06,2.58c0.03,0.78,0.08,1.56,0.15,2.33 l3.07-2.37c0.43-0.33,0.95-0.45,1.44-0.39c0.5,0.06,0.97,0.32,1.3,0.74c0.33,0.43,0.45,0.95,0.39,1.44 c-0.06,0.5-0.32,0.97-0.74,1.3l-4.9,3.79C4.96,72.6,5.32,74.32,5.76,76c0.43,1.65,0.93,3.28,1.49,4.87l2.36-3.1 c0.32-0.43,0.79-0.68,1.29-0.75c0.49-0.07,1.01,0.05,1.44,0.38l0,0c0.43,0.32,0.68,0.79,0.75,1.29c0.07,0.49-0.05,1.01-0.38,1.44 l-3.77,4.96c0.72,1.61,1.51,3.18,2.37,4.71c0.84,1.49,1.74,2.94,2.7,4.34l1.5-3.67c0.2-0.5,0.59-0.87,1.05-1.06 c0.46-0.19,0.99-0.21,1.49-0.01c0.5,0.2,0.87,0.59,1.06,1.05c0.19,0.46,0.21,0.99,0.01,1.49l-2.39,5.85 c0.61,0.75,1.23,1.48,1.87,2.19c0.66,0.73,1.33,1.45,2.03,2.15c0.57,0.58,1.15,1.14,1.74,1.68c0.53,0.49,1.08,0.98,1.63,1.45 l0.52-4.07c0.07-0.53,0.35-0.99,0.74-1.3c0.39-0.31,0.91-0.46,1.44-0.39c0.53,0.07,0.99,0.35,1.3,0.74 c0.31,0.39,0.46,0.91,0.39,1.44l-0.81,6.4c1.43,1.04,2.91,2.02,4.44,2.93c1.47,0.88,2.99,1.69,4.54,2.43l-0.58-4.22 c-0.07-0.53,0.08-1.05,0.38-1.44c0.3-0.4,0.76-0.68,1.29-0.75l0,0c0.53-0.07,1.04,0.08,1.44,0.38c0.4,0.3,0.68,0.76,0.75,1.29 l0.89,6.54c1.65,0.63,3.33,1.19,5.05,1.66c1.65,0.46,3.33,0.84,5.03,1.15l-1.69-4.04c-0.21-0.5-0.19-1.03,0-1.49 c0.19-0.46,0.56-0.86,1.05-1.06l0,0c0.5-0.21,1.03-0.19,1.49,0c0.46,0.19,0.86,0.56,1.06,1.05l2.59,6.18 c0.92,0.09,1.85,0.16,2.79,0.21c0.95,0.05,1.91,0.07,2.88,0.07c0.85,0,1.69-0.02,2.53-0.05c0.76-0.03,1.52-0.08,2.29-0.15 l-2.72-3.52c-0.33-0.43-0.45-0.95-0.39-1.44c0.06-0.49,0.31-0.96,0.73-1.29l0.02-0.02c0.42-0.32,0.94-0.45,1.43-0.38 c0.49,0.06,0.96,0.31,1.29,0.73l4.15,5.35c1.76-0.29,3.5-0.67,5.21-1.12c1.67-0.44,3.32-0.96,4.93-1.55l-3.57-2.72 c-0.43-0.33-0.69-0.79-0.75-1.29c-0.07-0.49,0.05-1.01,0.38-1.44l0,0c0.32-0.43,0.79-0.68,1.29-0.75c0.49-0.07,1.01,0.05,1.44,0.38 l5.4,4.1c1.61-0.74,3.19-1.55,4.72-2.44c1.49-0.86,2.95-1.79,4.35-2.78l-4.13-1.69c-0.5-0.2-0.87-0.59-1.06-1.05 c-0.19-0.46-0.21-0.99-0.01-1.49l0,0c0.2-0.5,0.59-0.86,1.05-1.06c0.46-0.19,0.99-0.21,1.49-0.01l6.24,2.55 c0.7-0.58,1.39-1.18,2.06-1.79c0.69-0.63,1.36-1.27,2.02-1.94c0.61-0.61,1.2-1.24,1.78-1.87c0.52-0.58,1.04-1.17,1.55-1.78 l-4.38-0.56c-0.53-0.07-0.99-0.35-1.3-0.74c-0.31-0.39-0.46-0.91-0.39-1.44c0.07-0.53,0.35-0.99,0.74-1.3 c0.39-0.31,0.91-0.46,1.44-0.39l6.65,0.84c1.02-1.44,1.98-2.93,2.87-4.47c0.86-1.48,1.65-3.01,2.38-4.57l-4.36,0.59 c-0.53,0.07-1.05-0.08-1.44-0.38s-0.68-0.76-0.75-1.29l0,0c-0.07-0.53,0.08-1.04,0.38-1.44c0.3-0.4,0.76-0.68,1.29-0.75l6.63-0.9 c0.61-1.65,1.16-3.33,1.62-5.05c0.45-1.65,0.82-3.33,1.12-5.03l-4.05,1.7c-0.5,0.21-1.03,0.2-1.5,0.01 c-0.46-0.19-0.86-0.56-1.06-1.05c-0.21-0.5-0.2-1.03-0.01-1.5c0.19-0.46,0.56-0.86,1.05-1.06l6.18-2.59 c0.09-0.92,0.16-1.85,0.2-2.79c0.05-0.95,0.07-1.91,0.07-2.87c0-0.85-0.02-1.69-0.05-2.53c-0.03-0.76-0.08-1.53-0.14-2.29 l-3.52,2.73c-0.43,0.33-0.95,0.45-1.44,0.39c-0.49-0.06-0.96-0.31-1.29-0.73l-0.01-0.02c-0.32-0.42-0.45-0.94-0.38-1.43 c0.06-0.49,0.31-0.96,0.73-1.29l5.37-4.16c-0.29-1.77-0.65-3.52-1.1-5.24c-0.44-1.68-0.95-3.34-1.53-4.96l-2.77,3.65 c-0.32,0.43-0.79,0.68-1.29,0.75c-0.49,0.07-1.01-0.05-1.44-0.38l0,0c-0.43-0.33-0.68-0.79-0.75-1.29 c-0.07-0.49,0.05-1.01,0.38-1.44l4.18-5.5c-0.74-1.64-1.55-3.24-2.43-4.79c-0.86-1.52-1.79-2.99-2.78-4.41l-1.78,4.36 c-0.2,0.5-0.59,0.87-1.05,1.06c-0.46,0.19-0.99,0.21-1.48,0.01l-0.01,0c-0.5-0.2-0.86-0.59-1.06-1.05 c-0.19-0.46-0.21-0.99-0.01-1.48l2.67-6.52c-0.58-0.71-1.17-1.4-1.78-2.08c-0.63-0.7-1.27-1.38-1.93-2.05 c-0.62-0.62-1.26-1.24-1.91-1.83c-0.59-0.54-1.2-1.08-1.81-1.6l-0.61,4.81c-0.07,0.53-0.35,0.99-0.74,1.3 c-0.39,0.3-0.9,0.46-1.43,0.39l-0.02,0c-0.53-0.07-0.98-0.35-1.28-0.74c-0.3-0.39-0.46-0.9-0.39-1.43l0.89-7l0.02-0.12 c-1.46-1.05-2.97-2.03-4.53-2.93c-1.51-0.88-3.06-1.69-4.64-2.43l0.67,4.93c0.07,0.53-0.08,1.05-0.38,1.44 c-0.3,0.4-0.76,0.68-1.29,0.75l0,0c-0.53,0.07-1.04-0.08-1.44-0.38c-0.4-0.3-0.68-0.76-0.75-1.29c-0.27-2.32-0.69-4.67-0.95-6.99 c-0.01-0.05-0.01-0.1-0.01-0.14l0-0.06c-1.67-0.62-3.38-1.16-5.13-1.63C73.92,5.37,72.21,5,70.48,4.7l1.93,4.6 c0.21,0.5,0.2,1.03,0.01,1.5c-0.19,0.46-0.56,0.86-1.05,1.06c-0.5,0.21-1.03,0.2-1.5,0.01c-0.46-0.19-0.86-0.56-1.06-1.05 l-2.73-6.51c-0.02-0.04-0.03-0.09-0.05-0.13L66,4.13c-0.81-0.07-1.63-0.13-2.46-0.16c-0.84-0.04-1.69-0.06-2.55-0.06 c-0.98,0-1.94,0.02-2.9,0.07c-0.89,0.04-1.78,0.11-2.65,0.2l3.02,3.9c0.33,0.43,0.45,0.95,0.39,1.44c-0.06,0.5-0.32,0.97-0.74,1.3 c-0.43,0.33-0.95,0.45-1.44,0.39c-0.5-0.06-0.97-0.32-1.3-0.74L51.05,4.9l-0.07-0.1c-1.77,0.31-3.5,0.71-5.21,1.18 c-1.68,0.47-3.32,1.01-4.93,1.62l3.82,2.9c0.43,0.33,0.69,0.79,0.75,1.29c0.07,0.49-0.05,1.01-0.38,1.44 c-0.33,0.43-0.79,0.69-1.29,0.75c-0.49,0.07-1.01-0.05-1.44-0.38L36.71,9.36L36.71,9.36z M60.99,30.53c4.19,0,8.18,0.83,11.82,2.34 c3.78,1.57,7.19,3.86,10.04,6.71c2.85,2.85,5.15,6.25,6.71,10.04c1.51,3.64,2.34,7.64,2.34,11.82c0,4.19-0.83,8.18-2.34,11.82 C88,77.04,85.7,80.45,82.85,83.3c-2.75,2.75-6,4.98-9.62,6.54c-3.48,1.5-7.29,2.38-11.3,2.5c-0.14,0.07-0.28,0.13-0.44,0.17 c-0.16,0.04-0.33,0.06-0.5,0.06c-0.17,0-0.34-0.02-0.5-0.06c-0.15-0.04-0.3-0.1-0.44-0.17c-4-0.12-7.82-1-11.3-2.5 c-3.62-1.56-6.88-3.79-9.62-6.54c-0.79-0.79-1.54-1.63-2.25-2.51c-0.69-0.86-1.34-1.77-1.94-2.7c-0.17-0.08-0.32-0.19-0.46-0.31 l-0.01-0.01c-0.14-0.13-0.26-0.28-0.36-0.45c-0.1-0.17-0.17-0.35-0.21-0.53c-0.04-0.18-0.06-0.36-0.05-0.53 c-1.22-2.23-2.17-4.62-2.81-7.14c-0.63-2.45-0.96-5.02-0.96-7.67c0-2.58,0.32-5.08,0.91-7.48c0.61-2.46,1.52-4.81,2.68-7 c0.02-0.1,0.05-0.19,0.08-0.28c0.04-0.1,0.08-0.19,0.13-0.28c0.05-0.08,0.1-0.16,0.16-0.23c0.05-0.07,0.11-0.13,0.17-0.19 c0.68-1.17,1.43-2.29,2.24-3.35c0.83-1.08,1.72-2.09,2.67-3.05c2.85-2.85,6.25-5.15,10.04-6.71 C52.81,31.36,56.81,30.53,60.99,30.53L60.99,30.53z M80.08,42.35c-2.33-2.33-5.09-4.24-8.14-5.59c-2.91-1.29-6.1-2.09-9.45-2.27 v18.58c0.88,0.17,1.71,0.47,2.47,0.88c0.79,0.41,1.5,0.94,2.13,1.56l16.15-9.33c-0.46-0.66-0.94-1.31-1.46-1.93 C81.26,43.58,80.69,42.95,80.08,42.35L80.08,42.35z M58.59,34.55c-3.17,0.28-6.19,1.11-8.95,2.39c-2.89,1.34-5.5,3.18-7.73,5.41 c-0.68,0.68-1.33,1.4-1.93,2.15c-0.58,0.71-1.12,1.46-1.62,2.23l15.68,9.05l0.2-0.21c0.61-0.61,1.3-1.13,2.06-1.55 c0.71-0.39,1.49-0.69,2.3-0.89V34.55L58.59,34.55z M36.46,50.15c-0.79,1.72-1.41,3.54-1.83,5.43c-0.42,1.89-0.64,3.85-0.64,5.86 c0,2.16,0.25,4.26,0.73,6.27c0.48,2.03,1.19,3.97,2.1,5.79l15.13-8.73c-0.13-0.42-0.23-0.85-0.3-1.29 c-0.07-0.47-0.11-0.94-0.11-1.42c0-0.52,0.04-1.03,0.13-1.53c0.08-0.48,0.2-0.94,0.35-1.39L36.46,50.15L36.46,50.15z M38.82,76.85 c0.45,0.64,0.92,1.26,1.41,1.86c0.53,0.63,1.08,1.24,1.67,1.82c2.28,2.28,4.96,4.15,7.93,5.5c2.84,1.29,5.94,2.1,9.2,2.34V71.06 c-0.9-0.17-1.76-0.46-2.54-0.87c-0.84-0.44-1.6-1-2.26-1.66c-0.07-0.07-0.14-0.14-0.21-0.22l-0.14-0.15L38.82,76.85L38.82,76.85z M62.95,88.37c3.26-0.23,6.36-1.05,9.2-2.34c2.97-1.35,5.65-3.22,7.93-5.5c0.61-0.61,1.19-1.25,1.74-1.91 c0.52-0.63,1.01-1.28,1.47-1.96l-15.42-8.91c-0.1,0.12-0.19,0.24-0.3,0.35c-0.13,0.15-0.26,0.29-0.39,0.42l-0.01,0.01 c-0.59,0.59-1.26,1.1-1.99,1.51c-0.69,0.39-1.44,0.69-2.23,0.89V88.37L62.95,88.37z M85.26,73.29c0.88-1.79,1.56-3.7,2.03-5.69 c0.46-1.98,0.71-4.04,0.71-6.16c0-2.13-0.25-4.2-0.71-6.19c-0.47-2-1.16-3.92-2.05-5.72l-15.97,9.22c0.19,0.5,0.34,1.02,0.45,1.56 c0.11,0.56,0.16,1.14,0.16,1.73c0,0.39-0.02,0.78-0.07,1.16c-0.04,0.35-0.11,0.7-0.19,1.04L85.26,73.29L85.26,73.29z M60.99,20.52 c5.54,0,10.83,1.1,15.65,3.1c5.01,2.07,9.51,5.11,13.29,8.89c3.77,3.77,6.81,8.28,8.89,13.29c2,4.82,3.1,10.11,3.1,15.65 c0,5.54-1.1,10.83-3.1,15.65c-2.07,5.01-5.11,9.51-8.89,13.29c-3.77,3.77-8.28,6.81-13.29,8.89c-4.82,2-10.11,3.1-15.65,3.1 c-5.54,0-10.83-1.1-15.65-3.1c-5.01-2.07-9.51-5.11-13.29-8.89c-3.77-3.77-6.81-8.28-8.89-13.29c-2-4.82-3.1-10.11-3.1-15.65 c0-5.54,1.1-10.83,3.1-15.65c2.07-5.01,5.11-9.51,8.89-13.29c3.77-3.77,8.28-6.81,13.29-8.89C50.16,21.62,55.45,20.52,60.99,20.52 L60.99,20.52z M87.06,35.37c-3.4-3.4-7.46-6.14-11.97-8.01c-4.34-1.8-9.11-2.79-14.1-2.79c-4.99,0-9.76,0.99-14.1,2.79 c-4.51,1.87-8.57,4.61-11.97,8.01c-3.4,3.4-6.14,7.46-8.01,11.97c-1.8,4.34-2.79,9.11-2.79,14.1c0,4.99,0.99,9.76,2.79,14.1 c1.87,4.51,4.61,8.57,8.01,11.97c3.4,3.4,7.46,6.14,11.97,8.01c4.34,1.8,9.11,2.79,14.1,2.79c4.99,0,9.76-0.99,14.1-2.79 c4.51-1.87,8.57-4.61,11.97-8.01c3.4-3.4,6.14-7.46,8.01-11.97c1.8-4.34,2.79-9.11,2.79-14.1c0-4.99-0.99-9.76-2.79-14.1 C93.2,42.83,90.46,38.77,87.06,35.37L87.06,35.37z M62.53,60.22c-0.24-0.24-0.52-0.43-0.84-0.56c-0.3-0.13-0.64-0.2-0.99-0.2 c-0.35,0-0.69,0.07-0.99,0.2c-0.32,0.13-0.6,0.32-0.84,0.56c-0.24,0.24-0.43,0.52-0.56,0.84c-0.13,0.3-0.2,0.64-0.2,0.99 c0,0.35,0.07,0.69,0.2,0.99c0.13,0.32,0.32,0.6,0.56,0.84l0.01,0.01c0.24,0.24,0.52,0.42,0.83,0.55c0.3,0.13,0.64,0.2,0.99,0.2 c0.35,0,0.69-0.07,0.99-0.2c0.32-0.13,0.6-0.32,0.84-0.56c0.24-0.24,0.43-0.52,0.56-0.84c0.13-0.3,0.2-0.64,0.2-0.99 c0-0.35-0.07-0.69-0.2-0.99C62.96,60.74,62.77,60.46,62.53,60.22L62.53,60.22z" />
                      </g>
                    </svg>
                    <span
                      class="text-sm font-medium ml-2 lg:opacity-0 lg:sidebar-expanded:opacity-100 2xl:opacity-100 duration-200">Vehicles
                      Management</span>
                  </div>
                </a>
              </li>
            </router-link>

          </ul>
        </div>

        <!-- Others -->
        <div>
          <h3 class="text-xs uppercase text-gray-400 dark:text-gray-500 font-semibold pl-3">
            <span class="hidden lg:block lg:sidebar-expanded:hidden 2xl:hidden text-center w-6"
              aria-hidden="true">•••</span>
            <span class="lg:hidden lg:sidebar-expanded:block 2xl:block">Others</span>
          </h3>

          <ul class="mt-3">
            <!-- Users -->
            <router-link to="/user" custom v-slot="{ href, navigate, isExactActive }">
              <li class="pl-4 pr-3 py-2 rounded-lg mb-0.5 last:mb-0 bg-linear-to-r"
                :class="isExactActive && 'from-slate-700/[0.12] dark:from-violet-500/[0.24] to-slate-500/[0.04]'">
                <a class="block text-gray-800 dark:text-gray-100 truncate transition"
                  :class="isExactActive ? '' : 'hover:text-gray-900 dark:hover:text-white'" :href="href"
                  @click="navigate">
                  <div class="flex items-center">
                    <svg class="dark:fill-gray-100" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1.2em" height="1.2em"
                      viewBox="0 0 122.879 122.879" enable-background="new 0 0 122.879 122.879" xml:space="preserve">
                      <g>
                     <path class="st0" d="M0,95.49L0,80.6c7.12-3.17,34.98-10.16,36.74-19.06c0.79-4.01-1.02-5.94-3-9.1l-6.37-10.15 c-1.49-2.39-2.61-3.24-2.58-6.18c0.02-1.66,0.05-3.29,0.29-4.88c0.3-2.03,0.55-2.1,1.62-3.73c0.72-1.1,0.63-1.43,0.63-3.96v-6.3 c0-7.28,2.68-11.84,7.2-14.42c6.62-3.78,20.04-3.78,26.62,0.08c4.44,2.6,7.06,7.14,7.06,14.34v6.3c0,2.83-0.1,2.91,0.93,4.39 c0.78,1.13,0.95,1.26,1.22,2.64c0.34,1.81,0.37,3.65,0.39,5.54c0.04,2.94-1.08,3.79-2.57,6.18l4.62,2.89l0.77-1.12 c1.54-2.24,2.6-3.79,2.64-7.44c0.02-0.18,0.02-0.37,0.02-0.56l-0.02,0c-0.01-1.1-0.03-2.18-0.08-3.04 c-0.07-1.16-0.18-2.32-0.4-3.47c-0.41-2.14-0.71-2.71-1.61-4.02c-0.08-0.14-0.17-0.27-0.26-0.41l0,0l-0.12-0.17l-0.08-0.12l0,0 l-0.01-0.02l-0.01,0c0-0.03,0.04-0.07,0.04-0.58l0-0.69l0.02,0v-6.3c0-2.11-0.2-4.06-0.57-5.87c12.78-8.69,30.43-0.1,34.06,25.8 c3.49,24.94,18.45,24.05-4.9,24.05l-9.32,0c-0.03,6.35-1.03,9.6,5.56,13.16c6.58,3.56,24.35,5.39,24.35,14.41v5.78 c0,0.46-0.38,0.84-0.85,0.84l-23.37,0V78.73c0-5.75-7.97-6.83-12.17-8.13c-3.84-1.18-8.37-2.58-12.33-4.06 c0.09-1.56-0.04-3.3-0.05-5.32h-9.59c-0.16-0.25-0.27-0.49-0.31-0.73c-0.23-1.17,0.35-2.2,1.16-3.46c0.09-0.12,0.19-0.25,0.27-0.39 l-0.17-0.11v0l0.17,0.1l0.62-0.97l0.22-0.32l-0.01-0.01l6.13-9.78l0.25-0.36l-4.64-2.91l-6.37,10.15c-1.98,3.16-3.79,5.1-3,9.1 c1.75,8.9,27.24,13.91,34.36,17.08v16.86L0,95.49L0,95.49L0,95.49z"/>
                        </g>
                    </svg>
                    <span
                      class="text-sm font-medium ml-2 lg:opacity-0 lg:sidebar-expanded:opacity-100 2xl:opacity-100 duration-200">Users</span>
                  </div>
                </a>
              </li>
            </router-link>
          </ul>
        </div>
      </div>

      <!-- Expand / collapse button -->
      <div class="pt-3 hidden lg:inline-flex 2xl:hidden justify-end mt-auto">
        <div class="w-12 pl-4 pr-3 py-2">
          <button class="text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"
            @click.prevent="sidebarExpanded = !sidebarExpanded">
            <span class="sr-only">Expand / collapse sidebar</span>
            <svg class="shrink-0 fill-current text-gray-400 dark:text-gray-500 sidebar-expanded:rotate-180"
              xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
              <path
                d="M15 16a1 1 0 0 1-1-1V1a1 1 0 1 1 2 0v14a1 1 0 0 1-1 1ZM8.586 7H1a1 1 0 1 0 0 2h7.586l-2.793 2.793a1 1 0 1 0 1.414 1.414l4.5-4.5A.997.997 0 0 0 12 8.01M11.924 7.617a.997.997 0 0 0-.217-.324l-4.5-4.5a1 1 0 0 0-1.414 1.414L8.586 7M12 7.99a.996.996 0 0 0-.076-.373Z" />
            </svg>
          </button>
        </div>
      </div>

    </div>
  </div>
</template>

<script>
import { ref, onMounted, onUnmounted, watch } from 'vue'
import { useRouter } from 'vue-router'

import SidebarLinkGroup from './SidebarLinkGroup.vue'

export default {
  name: 'Sidebar',
  props: [
    'sidebarOpen',
    'variant'
  ],
  components: {
    SidebarLinkGroup,
  },
  setup(props, { emit }) {

    const trigger = ref(null)
    const sidebar = ref(null)

    const storedSidebarExpanded = localStorage.getItem('sidebar-expanded')
    const sidebarExpanded = ref(storedSidebarExpanded === null ? false : storedSidebarExpanded === 'true')

    const currentRoute = useRouter().currentRoute.value

    // close on click outside
    const clickHandler = ({ target }) => {
      if (!sidebar.value || !trigger.value) return
      if (
        !props.sidebarOpen ||
        sidebar.value.contains(target) ||
        trigger.value.contains(target)
      ) return
      emit('close-sidebar')
    }

    // close if the esc key is pressed
    const keyHandler = ({ keyCode }) => {
      if (!props.sidebarOpen || keyCode !== 27) return
      emit('close-sidebar')
    }

    onMounted(() => {
      document.addEventListener('click', clickHandler)
      document.addEventListener('keydown', keyHandler)
    })

    onUnmounted(() => {
      document.removeEventListener('click', clickHandler)
      document.removeEventListener('keydown', keyHandler)
    })

    watch(sidebarExpanded, () => {
      localStorage.setItem('sidebar-expanded', sidebarExpanded.value)
      if (sidebarExpanded.value) {
        document.querySelector('body').classList.add('sidebar-expanded')
      } else {
        document.querySelector('body').classList.remove('sidebar-expanded')
      }
    })

    return {
      trigger,
      sidebar,
      sidebarExpanded,
      currentRoute
    }
  },
}
</script>s